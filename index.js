const movieListEl = document.querySelector(".movie-list")
const searchResultTitle = document.querySelector(".search-result__title")

async function onSearchChange(event) {    
    const search = event.target.value
    const movies = await fetch(`https://www.omdbapi.com/?apikey=f23755f8&s=${search}`)
    const moviesData = await movies.json();
    const moviesDataSearch = moviesData.Search.slice(0, 6)

    searchResultTitle.innerHTML = searchResultHTML(search)

    movieListEl.innerHTML = moviesDataSearch.map((movie) => movieHTML(movie)).join("")

}

function movieHTML(movie) {
    return `<div class="movie">
                <img class="movie__poster" src="${movie.Poster}" alt="">
                <div class="movie__description">
                    <h3 class="movie-name">${movie.Title}</h3>
                    <p class="movie-date">${movie.Year}</p>
                </div>
            </div>`
}


function searchResultHTML(search) {
    return `<h2 class="search-result__title">Search Results for <span class="green">"${search}"</span></h2>`
}

//  SLIDER

// function controlFromInput(fromSlider, fromInput, toInput, controlSlider) {
//     const [from, to] = getParsed(fromInput, toInput);
//     fillSlider(fromInput, toInput, '#C6C6C6', '#25daa5', controlSlider);
//     if (from > to) {
//         fromSlider.value = to;
//         fromInput.value = to;
//     } else {
//         fromSlider.value = from;
//     }
// }
    
// function controlToInput(toSlider, fromInput, toInput, controlSlider) {
//     const [from, to] = getParsed(fromInput, toInput);
//     fillSlider(fromInput, toInput, '#C6C6C6', '#25daa5', controlSlider);
//     setToggleAccessible(toInput);
//     if (from <= to) {
//         toSlider.value = to;
//         toInput.value = to;
//     } else {
//         toInput.value = from;
//     }
// }

// function controlFromSlider(fromSlider, toSlider, fromInput) {
//   const [from, to] = getParsed(fromSlider, toSlider);
//   fillSlider(fromSlider, toSlider, '#C6C6C6', '#25daa5', toSlider);
//   if (from > to) {
//     fromSlider.value = to;
//     fromInput.value = to;
//   } else {
//     fromInput.value = from;
//   }
// }

// function controlToSlider(fromSlider, toSlider, toInput) {
//   const [from, to] = getParsed(fromSlider, toSlider);
//   fillSlider(fromSlider, toSlider, '#C6C6C6', '#25daa5', toSlider);
//   setToggleAccessible(toSlider);
//   if (from <= to) {
//     toSlider.value = to;
//     toInput.value = to;
//   } else {
//     toInput.value = from;
//     toSlider.value = from;
//   }
// }

// function getParsed(currentFrom, currentTo) {
//   const from = parseInt(currentFrom.value, 10);
//   const to = parseInt(currentTo.value, 10);
//   return [from, to];
// }

// function fillSlider(from, to, sliderColor, rangeColor, controlSlider) {
//     const rangeDistance = to.max-to.min;
//     const fromPosition = from.value - to.min;
//     const toPosition = to.value - to.min;
//     controlSlider.style.background = `linear-gradient(
//       to right,
//       ${sliderColor} 0%,
//       ${sliderColor} ${(fromPosition)/(rangeDistance)*100}%,
//       ${rangeColor} ${((fromPosition)/(rangeDistance))*100}%,
//       ${rangeColor} ${(toPosition)/(rangeDistance)*100}%, 
//       ${sliderColor} ${(toPosition)/(rangeDistance)*100}%, 
//       ${sliderColor} 100%)`;
// }

// function setToggleAccessible(currentTarget) {
//   const toSlider = document.querySelector('#toSlider');
//   if (Number(currentTarget.value) <= 0 ) {
//     toSlider.style.zIndex = 2;
//   } else {
//     toSlider.style.zIndex = 0;
//   }
// }

// const fromSlider = document.querySelector('#fromSlider');
// const toSlider = document.querySelector('#toSlider');
// const fromInput = document.querySelector('#fromInput');
// const toInput = document.querySelector('#toInput');
// fillSlider(fromSlider, toSlider, '#C6C6C6', '#25daa5', toSlider);
// setToggleAccessible(toSlider);

// fromSlider.oninput = () => controlFromSlider(fromSlider, toSlider, fromInput);
// toSlider.oninput = () => controlToSlider(fromSlider, toSlider, toInput);
// fromInput.oninput = () => controlFromInput(fromSlider, fromInput, toInput, toSlider);
// toInput.oninput = () => controlToInput(toSlider, fromInput, toInput, toSlider);